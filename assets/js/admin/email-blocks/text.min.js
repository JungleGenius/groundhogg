var TextBlock={};!function($,t,i){$.extend(i,{blockType:"text",pFont:null,pSize:null,h1Font:null,h1Size:null,h2Font:null,h2Size:null,richText:null,init:function(){var i=this;this.pFont=$("#p-font"),this.pFont.on("change",function(i){t.getActive().find(".simple-editor-content").css("font-family",$(this).val())}),this.pSize=$("#p-size"),this.pSize.on("change",function(i){t.getActive().find(".simple-editor-content").css("font-size",$(this).val()+"px")}),this.h1Font=$("#h1-font"),this.h1Font.on("change",function(i){t.getActive().find("h1").css("font-family",$(this).val())}),this.h1Size=$("#h1-size"),this.h1Size.on("change",function(i){t.getActive().find("h1").css("font-size",$(this).val()+"px")}),this.h2Font=$("#h2-font"),this.h2Font.on("change",function(i){t.getActive().find("h2").css("font-family",$(this).val())}),this.h2Size=$("#h2-size"),this.h2Size.on("change",function(i){t.getActive().find("h2").css("font-size",$(this).val()+"px")}),$(document).on("madeActive",function(t,n,e){i.destroyEditor(),i.blockType===e&&i.parse(n)}),$(document).on("madeInactive",function(t){i.destroyEditor()}),$(document).on("duplicateBlock",function(t){i.destroyEditor()})},createEditor:function(){this.richText=t.getActive().find(".content-wrapper"),this.richText.simpleEditor({defaultParagraphSeparator:"p",actions:["bold","italic","underline","color","strikethrough","responsiveAlign","alignLeft","alignCenter","alignRight","alignJustify","responsiveHeadings","heading1","heading2","olist","ulist","paragraph","link","unlink"]}),this.placeActionBar(),$(document).scroll(function(t){i.placeActionBar()})},placeActionBar:function(){var i,n,e=$(".simple-editor-actionbar");e.width($("#email-body").width()),t.inFrame()?(n=0,i=0):(i=32,n=160),window.pageYOffset>$("#editor").offset().top-(48+i)?(e.css("position","fixed"),e.css("top",46+i+"px"),e.css("left",n+"px")):(e.css("position","absolute"),e.css("top",$("#editor").offset().top-i),e.css("left",0))},destroyEditor:function(){this.richText&&(this.richText.simpleEditor().destroy(),this.richText=null)},parse:function(t){this.createEditor(),this.pFont.val(t.find(".simple-editor-content").css("font-family").replace(/"/g,"")),this.pSize.val(t.find(".simple-editor-content").css("font-size").replace("px",""));try{this.h1Font.val(t.find("h1").css("font-family").replace(/"/g,""))}catch(t){}try{this.h1Size.val(t.find("h1").css("font-size").replace("px",""))}catch(t){}try{this.h2Font.val(t.find("h2").css("font-family").replace(/"/g,""))}catch(t){}try{this.h2Size.val(t.find("h2").css("font-size").replace("px",""))}catch(t){}}}),$(function(){i.init()})}(jQuery,EmailEditor,TextBlock);