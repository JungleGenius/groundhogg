($=>{const{el:el,objectToStyle:objectToStyle,icons:icons}=Groundhogg.element;const{formatNumber:formatNumber,formatTime:formatTime,formatDate:formatDate,formatDateTime:formatDateTime}=Groundhogg.formatting;const{__:__,_x:_x,_n:_n,_nx:_nx,sprintf:sprintf}=wp.i18n;const BlockEditor=(el,{email:email,onChange:onChange})=>({$el:$(el),email:email,init(){this.render()},templates:{css:()=>{},block:({type:type,name:name,svg:svg})=>`<div class="block" data-type="${type}">\n            <div class="icon">\n                ${svg}\n            </div>\n            <span class="block-name">${name}</span>\n        </div>`,editor:()=>`<div id="block-editor">\n            \x3c!-- BLOCKS --\x3e\n            <div id="blocks-panel"></div>\n            \x3c!-- CONTENT --\x3e\n            <div id="content"></div>\n            \x3c!-- CONTROLS --\x3e\n            <div id="controls-panel"></div>\n        </div>`},render(){this.$el.html(this.templates.editor());this.onMount()},onMount(){this.$el.find("#blocks-panel").html(Object.values(BlockRegistry.blocks).map((b=>this.templates.block(b))))}});const BlockRegistry={collections:{core:"Groundhogg"},blocks:{},registerBlock(type,name,block,collection="core"){this.blocks[type]={type:type,name:name,collection:collection,...block}},registerBlockCollection(collection,name){this.collections[collection]=name}};const{registerBlock:registerBlock}=BlockRegistry;registerBlock("text",__("Text"),{svg:icons.tag,controls:()=>{},controlsOnMount:()=>{},edit:()=>{},editOnMount:()=>{},html:({content:content,style:style})=>content});registerBlock("button",__("Button"),{svg:icons.tag,controls:({link:link,style:style})=>{},controlsOnMount:()=>{},edit:({text:text,align:align})=>`\n\t\t  <table>\n\t\t\t  <tbody>\n\t\t\t  <tr>\n\t\t\t\t  <td align="${align}">\n              <a class="email-button" contenteditable="true">${text}</a>\n          </td>\n\t\t\t  </tr>\n\t\t\t  </tbody>\n\t\t  </table>`,editOnMount:({id:id,updateStyle:updateStyle,updateBlock:updateBlock})=>{$(`#${id} .email-button`).on("keyup blur",(e=>{updateBlock({text:e.target.textContent})}))},css:({id:id,style:style})=>`#${id} a.email-button {\n          ${objectToStyle(style)}\n      }`,html:({link:link,text:text,align:align})=>`\n\t\t  <table>\n\t\t\t  <tbody>\n\t\t\t  <tr>\n\t\t\t\t  <td align="${align}">\n              <a href="${link}" class="email-button">${text}</a>\n          </td>\n\t\t\t  </tr>\n\t\t\t  </tbody>\n\t\t  </table>`});Groundhogg.EmailBlockEditor=BlockEditor;BlockEditor("#email-editor-body",{}).init()})(jQuery);