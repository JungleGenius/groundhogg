(function($){const{uuid:uuid,loadingDots:loadingDots}=Groundhogg.element;const InfoCard=(id=uuid(),{title:title=(()=>{}),content:content=(()=>{}),onMount:onMount=(()=>{}),preload:preload=(()=>{}),isOpen:isOpen=true,state:state={},priority:priority=10})=>({id:id,title:title,content:content,onMount:onMount,isOpen:isOpen,priority:priority,preload:preload,state:state,render(args){const{id:id,title:title,content:content,isOpen:isOpen}=this;return`\n\t\t  <div id="${id}" class="gh-info-card ${isOpen?"open":"closed"}">\n\t\t\t  <div class="gh-info-card-header">\n\t\t\t\t  <button class="gh-info-card-toggle"></button>\n\t\t\t\t  <div class="gh-info-card-title">\n\t\t\t\t\t  ${title(args,this.state)}\n\t\t\t\t  </div>\n\t\t\t  </div>\n\t\t\t  <div class="gh-info-card-content">\n\t\t\t\t  ${content(args,this.state)}\n\t\t\t  </div>\n\t\t  </div>`},mount($el,args){const setState=state=>{this.state={...this.state,...state};this.mount($el,args)};if($el.find(`#${this.id}`).length){$el.find(`#${this.id}`).replaceWith(this.render(args))}else{$el.append(this.render(args))}$(`#${this.id} .gh-info-card-header`).on("click",(e=>{if($(`#${this.id}`).is(".closed")){this.open($el,args)}else{this.close($el,args)}}));this.onMount(args,this.state,setState)},open(...args){this.isOpen=true;this.mount(...args)},close(...args){this.isOpen=false;this.mount(...args)}});const InfoCardProvider=({cards:cards=[]})=>({cards:cards,preload(args){const promises=[];this.cards.forEach((card=>{let p=card.preload(args);if(!p){return}if(Array.isArray(p)&&p.length>0){promises.push(...p)}else{promises.push(p)}}));return Promise.all(promises)},async mount(el,args){await this.preload(args);const $el=$(el);$el.addClass("gh-info-card-provider");$el.html("");this.cards.sort(((a,b)=>a.priority-b.priority)).forEach((card=>card.mount($el,args)));console.log(this.cards);$el.sortable({handle:".gh-info-card-header",placeholder:"gh-info-card-provider",start:(e,ui)=>{ui.placeholder.height(ui.item.height());ui.placeholder.width(ui.item.width())},update:(e,ui)=>{}})},registerCard(id,card){this.cards.push(InfoCard(id,card))}});Groundhogg.utils={...Groundhogg.utils,InfoCard:InfoCard,InfoCardProvider:InfoCardProvider}})(jQuery);