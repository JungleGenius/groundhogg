!function($,i,e){$.extend(i,{ID:0,newEmailId:0,step:null,addingEmail:!1,editingEmail:!1,changesSaved:!1,init:function(){var i=this;$(document).on("click",".edit-email",function(t){i.step=$(this).closest(".postbox"),i.addingEmail=!1,i.editingEmail=!0,e.init("Add Email",{source:i.edit_email_path+"&email="+i.getEmailId(),width:1500,height:900,footertext:e.defaults.footertext})}),$(document).on("click",".add-email",function(t){i.step=$(this).closest(".postbox"),i.addingEmail=!0,i.editingEmail=!1,e.init("Edit Email",{source:i.add_email_path,width:1500,height:900,footertext:e.defaults.footertext})}),$(document).on("modal-closed",function(e){if(i.addingEmail||i.editingEmail){if(!i.changesSaved&&!confirm(i.save_changes_prompt))throw new Error("Unsaved changes!");i.addingEmail&&(console.log(i.newEmailId),i.step.find(".add-email-override").val(i.newEmailId)),e.addingEmail=!1,e.editingEmail=!1}})},getEmailId:function(){return this.step.find(".gh-email-picker").val()}}),$(function(){i.init()})}(jQuery,EmailStep,GroundhoggModal);