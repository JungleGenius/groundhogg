!function($,i,a){$.extend(i,{ID:0,newEmailId:0,step:null,addingEmail:!1,editingEmail:!1,changesSaved:!1,init:function(){var i=this;$(document).on("click",".edit-email",function(e){i.step=$(this).closest(".postbox"),i.addingEmail=!1,i.editingEmail=!0,a.init("Add Email",{source:i.edit_email_path+"&email="+i.getEmailId(),width:1500,height:900})}),$(document).on("click",".add-email",function(e){i.step=$(this).closest(".postbox"),i.addingEmail=!1,i.editingEmail=!0,a.init("Edit Email",{source:i.add_email_path,width:1500,height:900})}),$(document).on("modal-closed",function(a){if(i.addingEmail||i.editingEmail){if(!i.changesSaved&&!confirm(i.save_changes_prompt))throw new Error("Unsaved changes!");a.addingEmail&&a.target.find(".add-email-override").val(i.newEmailId),a.addingEmail=!1,a.editingEmail=!1}})},getEmailId:function(){return this.step.find(".gh-email-picker").val()}}),$(function(){i.init()})}(jQuery,EmailStep,GroundhoggModal);