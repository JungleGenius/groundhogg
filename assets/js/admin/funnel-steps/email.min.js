!function($,i,t){$.extend(i,{ID:0,step:null,addingEmail:!1,editingEmail:!1,changesSaved:!1,init:function(){var i=this;$(document).on("click",".edit-email",function(t){i.step=$(this).closest(".postbox"),i.addingEmail=!1,i.editingEmail=!0})},init_old:function(){$(document).on("change",".gh-email-picker",function(i){var t="#source="+encodeURIComponent(base.path+"&action=edit&email="+$(this).val())+"&height=900&width=1500";i.ID=$(this).val(),i.target=$(this).closest(".postbox"),$(this).closest(".form-table").find(".edit-email").attr("href",t)}),$(document).on("click",".add-email",function(i){i.target=$(this).closest(".postbox"),i.addingEmail=!0,i.editingEmail=!1}),$(document).on("click",".edit-email",function(i){i.target=$(this).closest(".postbox"),i.addingEmail=!1,i.editingEmail=!0}),$(document).on("click",".popup-save",function(i){if(i.addingEmail||i.editingEmail){if(!i.changesSaved&&!confirm(base.dontSaveChangesMsg))throw new Error("Unsaved changes!");i.addingEmail&&i.target.find(".add-email-override").val(i.ID),i.addingEmail=!1,i.editingEmail=!1}})}}),$(function(){i.init()})}(jQuery,EmailStep);