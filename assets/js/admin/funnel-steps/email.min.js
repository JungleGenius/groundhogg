!function($,i,t){$.extend(i,{ID:0,newEmailId:0,step:null,addingEmail:!1,editingEmail:!1,changesSaved:!1,init:function(){var i=this;$(document).on("click",".edit-email",function(e){i.step=$(this).closest(".postbox"),i.addingEmail=!1,i.editingEmail=!0,t.init("Add Email",{source:i.edit_email_path+"&email="+i.getEmailId(),width:1500,height:900,footertext:t.defaults.footertext})}),$(document).on("click",".add-email",function(e){i.step=$(this).closest(".postbox"),i.addingEmail=!1,i.editingEmail=!0,t.init("Edit Email",{source:i.add_email_path,width:1500,height:900,footertext:t.defaults.footertext})}),$(document).on("modal-closed",function(t){if(i.addingEmail||i.editingEmail){if(!i.changesSaved&&!confirm(i.save_changes_prompt))throw new Error("Unsaved changes!");t.addingEmail&&t.target.find(".add-email-override").val(i.newEmailId),t.addingEmail=!1,t.editingEmail=!1}})},getEmailId:function(){return this.step.find(".gh-email-picker").val()}}),$(function(){i.init()})}(jQuery,EmailStep,GroundhoggModal);