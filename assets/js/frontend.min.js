var Groundhogg;!function($){Groundhogg={leadSource:"gh_referer",refID:"gh_ref_id",iterations:0,interval:0,setCookie:function(e,o,t){var r=new Date;r.setTime(r.getTime()+24*t*60*60*1e3);var i="expires="+r.toUTCString();document.cookie=e+"="+o+";"+i+";path=/"},getCookie:function(e){for(var o=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var i=t[r];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(o))return i.substring(o.length,i.length)}return null},pageView:function(){$.ajax({type:"post",url:wpgh_ajax_object.ajax_url,data:{action:"wpgh_page_view"},success:function(e){}})},logFormImpressions:function(){var e=$(".gh-form");$.each(e,function(e,o){var t=$(o).find('input[name="step_id"]').val();Groundhogg.formImpression(t)})},formImpression:function(e){$.ajax({type:"post",url:wpgh_ajax_object.ajax_url,dataType:"json",data:{action:"wpgh_form_impression",id:e},success:function(e){void 0!==e.error?console.log(e.error):void 0!==e.ref_id&&Groundhogg.setCookie(Groundhogg.refID,e.ref_id,30)}})},setQueueTimer:function(){this.processQueue(),this.interval=setInterval(Groundhogg.processQueue,3e4)},processQueue:function(){$.ajax({type:"post",url:wpgh_ajax_object.ajax_url,data:{action:"gh_process_queue"}}),this.iterations++,this.iterations>=5&&clearInterval(this.interval)},init:function(){this.getCookie(this.leadSource)||this.setCookie(this.leadSource,document.referrer,3),this.pageView(),this.logFormImpressions(),this.setQueueTimer()}},$(function(){Groundhogg.init()})}(jQuery);