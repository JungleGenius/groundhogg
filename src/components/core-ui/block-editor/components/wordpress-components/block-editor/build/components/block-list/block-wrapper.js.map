{"version":3,"sources":["@wordpress/block-editor/src/components/block-list/block-wrapper.js"],"names":["useBlockWrapperProps","props","__unstableIsHtml","fallbackRef","ref","onSelectionStart","Context","setBlockNodes","SetBlockNodes","BlockListBlockContext","clientId","rootClientId","isSelected","isFirstMultiSelected","isLastMultiSelected","isPartOfMultiSelection","enableAnimation","index","className","name","mode","blockTitle","wrapperProps","select","getSelectedBlocksInitialCaretPosition","_isMultiSelecting","isMultiSelecting","_isNavigationMode","isNavigationMode","shouldFocusFirstElement","initialPosition","undefined","insertDefaultBlock","removeBlock","isHovered","setHovered","node","current","nodes","blockLabel","focusTabbable","ownerDocument","activeElement","textInputs","focus","tabbable","find","filter","closest","isReverse","target","last","first","onKeyDown","event","keyCode","ENTER","BACKSPACE","DELETE","preventDefault","onMouseLeave","buttons","addEventListener","removeEventListener","onMouseOver","defaultPrevented","onMouseOut","htmlSuffix","id","tabIndex","role","style","BlockComponent","children","tagName","TagName","alternative","blockWrapperProps","ExtendedBlockComponent","ELEMENTS","reduce","acc","element","Block"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport { first, last, omit } from 'lodash';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseRef,\n\tuseEffect,\n\tuseState,\n\tuseContext,\n\tforwardRef,\n} from '@wordpress/element';\nimport { focus, isTextField, placeCaretAtHorizontalEdge } from '@wordpress/dom';\nimport { ENTER, BACKSPACE, DELETE } from '@wordpress/keycodes';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { useSelect, useDispatch } from '@wordpress/data';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { isInsideRootBlock } from '../../utils/dom';\nimport useMovingAnimation from '../use-moving-animation';\nimport { Context, SetBlockNodes } from './root-container';\nimport { BlockListBlockContext } from './block';\nimport ELEMENTS from './block-wrapper-elements';\n\n/**\n * This hook is used to lighly mark an element as a block element. Call this\n * hook and pass the returned props to the element to mark as a block. If you\n * define a ref for the element, it is important to pass the ref to this hook,\n * which the hooks in turn will pass to the component through the props it\n * returns. Optionally, you can also pass any other props through this hook, and\n * they will be merged and returned.\n *\n * @param {Object}  props   Optional. Props to pass to the element. Must contain\n *                          the ref if one is defined.\n * @param {Object}  options Options for internal use only.\n * @param {boolean} options.__unstableIsHtml\n *\n * @return {Object} Props to pass to the element to mark as a block.\n */\nexport function useBlockWrapperProps( props = {}, { __unstableIsHtml } = {} ) {\n\tconst fallbackRef = useRef();\n\tconst ref = props.ref || fallbackRef;\n\tconst onSelectionStart = useContext( Context );\n\tconst setBlockNodes = useContext( SetBlockNodes );\n\tconst {\n\t\tclientId,\n\t\trootClientId,\n\t\tisSelected,\n\t\tisFirstMultiSelected,\n\t\tisLastMultiSelected,\n\t\tisPartOfMultiSelection,\n\t\tenableAnimation,\n\t\tindex,\n\t\tclassName,\n\t\tname,\n\t\tmode,\n\t\tblockTitle,\n\t\twrapperProps = {},\n\t} = useContext( BlockListBlockContext );\n\tconst {\n\t\tinitialPosition,\n\t\tshouldFocusFirstElement,\n\t\tisNavigationMode,\n\t} = useSelect(\n\t\t( select ) => {\n\t\t\tconst {\n\t\t\t\tgetSelectedBlocksInitialCaretPosition,\n\t\t\t\tisMultiSelecting: _isMultiSelecting,\n\t\t\t\tisNavigationMode: _isNavigationMode,\n\t\t\t} = select( 'core/block-editor' );\n\n\t\t\treturn {\n\t\t\t\tshouldFocusFirstElement:\n\t\t\t\t\tisSelected &&\n\t\t\t\t\t! _isMultiSelecting() &&\n\t\t\t\t\t! _isNavigationMode(),\n\t\t\t\tinitialPosition: isSelected\n\t\t\t\t\t? getSelectedBlocksInitialCaretPosition()\n\t\t\t\t\t: undefined,\n\t\t\t\tisNavigationMode: _isNavigationMode,\n\t\t\t};\n\t\t},\n\t\t[ isSelected ]\n\t);\n\tconst { insertDefaultBlock, removeBlock } = useDispatch(\n\t\t'core/block-editor'\n\t);\n\tconst [ isHovered, setHovered ] = useState( false );\n\n\t// Provide the selected node, or the first and last nodes of a multi-\n\t// selection, so it can be used to position the contextual block toolbar.\n\t// We only provide what is necessary, and remove the nodes again when they\n\t// are no longer selected.\n\tuseEffect( () => {\n\t\tif ( isSelected || isFirstMultiSelected || isLastMultiSelected ) {\n\t\t\tconst node = ref.current;\n\t\t\tsetBlockNodes( ( nodes ) => ( {\n\t\t\t\t...nodes,\n\t\t\t\t[ clientId ]: node,\n\t\t\t} ) );\n\t\t\treturn () => {\n\t\t\t\tsetBlockNodes( ( nodes ) => omit( nodes, clientId ) );\n\t\t\t};\n\t\t}\n\t}, [ isSelected, isFirstMultiSelected, isLastMultiSelected ] );\n\n\t// Set new block node if it changes.\n\t// This effect should happen on every render, so no dependencies should be\n\t// added.\n\tuseEffect( () => {\n\t\tconst node = ref.current;\n\t\tsetBlockNodes( ( nodes ) => {\n\t\t\tif ( ! nodes[ clientId ] || nodes[ clientId ] === node ) {\n\t\t\t\treturn nodes;\n\t\t\t}\n\n\t\t\treturn { ...nodes, [ clientId ]: node };\n\t\t} );\n\t} );\n\n\t// translators: %s: Type of block (i.e. Text, Image etc)\n\tconst blockLabel = sprintf( __( 'Block: %s' ), blockTitle );\n\n\t// Handing the focus of the block on creation and update\n\n\t/**\n\t * When a block becomes selected, transition focus to an inner tabbable.\n\t */\n\tconst focusTabbable = () => {\n\t\tconst { ownerDocument } = ref.current;\n\n\t\t// Focus is captured by the wrapper node, so while focus transition\n\t\t// should only consider tabbables within editable display, since it\n\t\t// may be the wrapper itself or a side control which triggered the\n\t\t// focus event, don't unnecessary transition to an inner tabbable.\n\t\tif (\n\t\t\townerDocument.activeElement &&\n\t\t\tisInsideRootBlock( ref.current, ownerDocument.activeElement )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Find all tabbables within node.\n\t\tconst textInputs = focus.tabbable.find( ref.current ).filter(\n\t\t\t( node ) =>\n\t\t\t\tisTextField( node ) &&\n\t\t\t\t// Exclude inner blocks and block appenders\n\t\t\t\tisInsideRootBlock( ref.current, node ) &&\n\t\t\t\t! node.closest( '.block-list-appender' )\n\t\t);\n\n\t\t// If reversed (e.g. merge via backspace), use the last in the set of\n\t\t// tabbables.\n\t\tconst isReverse = -1 === initialPosition;\n\t\tconst target =\n\t\t\t( isReverse ? last : first )( textInputs ) || ref.current;\n\n\t\tplaceCaretAtHorizontalEdge( target, isReverse );\n\t};\n\n\tuseEffect( () => {\n\t\tif ( shouldFocusFirstElement ) {\n\t\t\tfocusTabbable();\n\t\t}\n\t}, [ shouldFocusFirstElement ] );\n\n\t// Block Reordering animation\n\tuseMovingAnimation(\n\t\tref,\n\t\tisSelected || isPartOfMultiSelection,\n\t\tisSelected || isFirstMultiSelected,\n\t\tenableAnimation,\n\t\tindex\n\t);\n\n\tuseEffect( () => {\n\t\tif ( ! isSelected ) {\n\t\t\treturn;\n\t\t}\n\n\t\t/**\n\t\t * Interprets keydown event intent to remove or insert after block if\n\t\t * key event occurs on wrapper node. This can occur when the block has\n\t\t * no text fields of its own, particularly after initial insertion, to\n\t\t * allow for easy deletion and continuous writing flow to add additional\n\t\t * content.\n\t\t *\n\t\t * @param {KeyboardEvent} event Keydown event.\n\t\t */\n\t\tfunction onKeyDown( event ) {\n\t\t\tconst { keyCode, target } = event;\n\n\t\t\tif (\n\t\t\t\tkeyCode !== ENTER &&\n\t\t\t\tkeyCode !== BACKSPACE &&\n\t\t\t\tkeyCode !== DELETE\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( target !== ref.current || isTextField( target ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( keyCode === ENTER ) {\n\t\t\t\tinsertDefaultBlock( {}, rootClientId, index + 1 );\n\t\t\t} else {\n\t\t\t\tremoveBlock( clientId );\n\t\t\t}\n\t\t}\n\n\t\tfunction onMouseLeave( { buttons } ) {\n\t\t\t// The primary button must be pressed to initiate selection.\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/buttons\n\t\t\tif ( buttons === 1 ) {\n\t\t\t\tonSelectionStart( clientId );\n\t\t\t}\n\t\t}\n\n\t\tref.current.addEventListener( 'keydown', onKeyDown );\n\t\tref.current.addEventListener( 'mouseleave', onMouseLeave );\n\n\t\treturn () => {\n\t\t\tref.current.removeEventListener( 'mouseleave', onMouseLeave );\n\t\t\tref.current.removeEventListener( 'keydown', onKeyDown );\n\t\t};\n\t}, [ isSelected, onSelectionStart, insertDefaultBlock, removeBlock ] );\n\n\tuseEffect( () => {\n\t\tif ( ! isNavigationMode ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction onMouseOver( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( isHovered ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetHovered( true );\n\t\t}\n\n\t\tfunction onMouseOut( event ) {\n\t\t\tif ( event.defaultPrevented ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( ! isHovered ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsetHovered( false );\n\t\t}\n\n\t\tref.current.addEventListener( 'mouseover', onMouseOver );\n\t\tref.current.addEventListener( 'mouseout', onMouseOut );\n\n\t\treturn () => {\n\t\t\tref.current.removeEventListener( 'mouseover', onMouseOver );\n\t\t\tref.current.removeEventListener( 'mouseout', onMouseOut );\n\t\t};\n\t}, [ isNavigationMode, isHovered, setHovered ] );\n\n\tconst htmlSuffix = mode === 'html' && ! __unstableIsHtml ? '-visual' : '';\n\n\treturn {\n\t\t...wrapperProps,\n\t\t...props,\n\t\tref,\n\t\tid: `block-${ clientId }${ htmlSuffix }`,\n\t\ttabIndex: 0,\n\t\trole: 'group',\n\t\t'aria-label': blockLabel,\n\t\t'data-block': clientId,\n\t\t'data-type': name,\n\t\t'data-title': blockTitle,\n\t\tclassName: classnames(\n\t\t\tclassName,\n\t\t\tprops.className,\n\t\t\twrapperProps.className,\n\t\t\t{ 'is-hovered': isHovered }\n\t\t),\n\t\tstyle: { ...wrapperProps.style, ...props.style },\n\t};\n}\n\nconst BlockComponent = forwardRef(\n\t( { children, tagName: TagName = 'div', ...props }, ref ) => {\n\t\tdeprecated( 'wp.blockEditor.__experimentalBlock', {\n\t\t\talternative: 'wp.blockEditor.__experimentalUseBlockWrapperProps',\n\t\t} );\n\t\tconst blockWrapperProps = useBlockWrapperProps( { ...props, ref } );\n\t\treturn <TagName { ...blockWrapperProps }>{ children }</TagName>;\n\t}\n);\n\nconst ExtendedBlockComponent = ELEMENTS.reduce( ( acc, element ) => {\n\tacc[ element ] = forwardRef( ( props, ref ) => {\n\t\treturn <BlockComponent { ...props } ref={ ref } tagName={ element } />;\n\t} );\n\treturn acc;\n}, BlockComponent );\n\nexport const Block = ExtendedBlockComponent;\n"]}