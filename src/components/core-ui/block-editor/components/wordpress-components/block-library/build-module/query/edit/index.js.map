{"version":3,"sources":["@wordpress/block-library/src/query/edit/index.js"],"names":["useInstanceId","useEffect","BlockControls","InnerBlocks","__experimentalUseBlockWrapperProps","useBlockWrapperProps","QueryToolbar","QueryProvider","QueryInspectorControls","TEMPLATE","QueryEdit","attributes","queryId","query","setAttributes","instanceId","blockWrapperProps","updateQuery","newQuery"],"mappings":";;;;;;;AAAA;;;AAGA,SAASA,aAAT,QAA8B,oBAA9B;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,SACCC,aADD,EAECC,WAFD,EAGCC,kCAAkC,IAAIC,oBAHvC,QAIO,yBAJP;AAMA;;;;AAGA,OAAOC,YAAP,MAAyB,iBAAzB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AACA,OAAOC,sBAAP,MAAmC,4BAAnC;AAEA,IAAMC,QAAQ,GAAG,CAAE,CAAE,iBAAF,CAAF,EAAyB,CAAE,uBAAF,CAAzB,CAAjB;AACA,eAAe,SAASC,SAAT,OAGX;AAAA,6BAFHC,UAEG;AAAA,MAFWC,OAEX,mBAFWA,OAEX;AAAA,MAFoBC,KAEpB,mBAFoBA,KAEpB;AAAA,MADHC,aACG,QADHA,aACG;AACH,MAAMC,UAAU,GAAGf,aAAa,CAAEU,SAAF,CAAhC;AACA,MAAMM,iBAAiB,GAAGX,oBAAoB,EAA9C,CAFG,CAGH;AACA;;AACAJ,EAAAA,SAAS,CAAE,YAAM;AAChB,QAAK,CAAEW,OAAP,EAAiB;AAChBE,MAAAA,aAAa,CAAE;AAAEF,QAAAA,OAAO,EAAEG;AAAX,OAAF,CAAb;AACA;AACD,GAJQ,EAIN,CAAEH,OAAF,EAAWG,UAAX,CAJM,CAAT;;AAKA,MAAME,WAAW,GAAG,SAAdA,WAAc,CAAEC,QAAF;AAAA,WACnBJ,aAAa,CAAE;AAAED,MAAAA,KAAK,kCAAOA,KAAP,GAAiBK,QAAjB;AAAP,KAAF,CADM;AAAA,GAApB;;AAEA,SACC,8BACC,cAAC,sBAAD;AAAwB,IAAA,KAAK,EAAGL,KAAhC;AAAwC,IAAA,QAAQ,EAAGI;AAAnD,IADD,EAEC,cAAC,aAAD,QACC,cAAC,YAAD;AAAc,IAAA,KAAK,EAAGJ,KAAtB;AAA8B,IAAA,QAAQ,EAAGI;AAAzC,IADD,CAFD,EAKC,qBAAUD,iBAAV,EACC,cAAC,aAAD,QACC,cAAC,WAAD;AAAa,IAAA,QAAQ,EAAGP;AAAxB,IADD,CADD,CALD,CADD;AAaA;AAED,cAAc,kBAAd","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useInstanceId } from '@wordpress/compose';\nimport { useEffect } from '@wordpress/element';\nimport {\n\tBlockControls,\n\tInnerBlocks,\n\t__experimentalUseBlockWrapperProps as useBlockWrapperProps,\n} from '@wordpress/block-editor';\n\n/**\n * Internal dependencies\n */\nimport QueryToolbar from './query-toolbar';\nimport QueryProvider from './query-provider';\nimport QueryInspectorControls from './query-inspector-controls';\n\nconst TEMPLATE = [ [ 'core/query-loop' ], [ 'core/query-pagination' ] ];\nexport default function QueryEdit( {\n\tattributes: { queryId, query },\n\tsetAttributes,\n} ) {\n\tconst instanceId = useInstanceId( QueryEdit );\n\tconst blockWrapperProps = useBlockWrapperProps();\n\t// We need this for multi-query block pagination.\n\t// Query parameters for each block are scoped to their ID.\n\tuseEffect( () => {\n\t\tif ( ! queryId ) {\n\t\t\tsetAttributes( { queryId: instanceId } );\n\t\t}\n\t}, [ queryId, instanceId ] );\n\tconst updateQuery = ( newQuery ) =>\n\t\tsetAttributes( { query: { ...query, ...newQuery } } );\n\treturn (\n\t\t<>\n\t\t\t<QueryInspectorControls query={ query } setQuery={ updateQuery } />\n\t\t\t<BlockControls>\n\t\t\t\t<QueryToolbar query={ query } setQuery={ updateQuery } />\n\t\t\t</BlockControls>\n\t\t\t<div { ...blockWrapperProps }>\n\t\t\t\t<QueryProvider>\n\t\t\t\t\t<InnerBlocks template={ TEMPLATE } />\n\t\t\t\t</QueryProvider>\n\t\t\t</div>\n\t\t</>\n\t);\n}\n\nexport * from './query-provider';\n"]}