{"version":3,"sources":["@wordpress/block-library/src/navigation/edit.js"],"names":["Navigation","selectedBlockHasDescendants","attributes","setAttributes","clientId","hasExistingNavItems","isImmediateParentOfSelectedBlock","isSelected","updateInnerBlocks","className","hasSubmenuIndicatorSetting","hasItemJustificationControls","hasListViewModal","isPlaceholderShown","setIsPlaceholderShown","selectBlock","blockProps","navigatorToolbarButton","navigatorModal","blocks","selectNavigationBlock","handleItemsAlignment","align","itemsJustification","undefined","blockClassNames","orientation","navIcons","justifyLeftIcon","icon","title","isActive","onClick","justifyCenterIcon","justifyRightIcon","showSubmenuIcon","value","InnerBlocks","DefaultAppender","select","innerBlocks","getBlocks","getClientIdsOfDescendants","hasSelectedInnerBlock","getSelectedBlockClientId","selectedBlockId","length","dispatch","replaceInnerBlocks"],"mappings":";;;;;;;;;;;AASA;;;;;;;;AANA;;AACA;;AAMA;;AAMA;;AACA;;AACA;;AACA;;AAKA;;AACA;;AACA;;AA1BA;;;;AAMA;;;;AAeA;;;AAOA,SAASA,UAAT,OAaI;AAAA;;AAAA,MAZHC,2BAYG,QAZHA,2BAYG;AAAA,MAXHC,UAWG,QAXHA,UAWG;AAAA,MAVHC,aAUG,QAVHA,aAUG;AAAA,MATHC,QASG,QATHA,QASG;AAAA,MARHC,mBAQG,QARHA,mBAQG;AAAA,MAPHC,gCAOG,QAPHA,gCAOG;AAAA,MANHC,UAMG,QANHA,UAMG;AAAA,MALHC,iBAKG,QALHA,iBAKG;AAAA,MAJHC,SAIG,QAJHA,SAIG;AAAA,mCAHHC,0BAGG;AAAA,MAHHA,0BAGG,sCAH0B,IAG1B;AAAA,mCAFHC,4BAEG;AAAA,MAFHA,4BAEG,sCAF4B,IAE5B;AAAA,mCADHC,gBACG;AAAA,MADHA,gBACG,sCADgB,IAChB;;AAAA,kBACmD,uBACrD,CAAEP,mBADmD,CADnD;AAAA;AAAA,MACKQ,kBADL;AAAA,MACyBC,qBADzB;;AAAA,qBAKqB,uBAAa,mBAAb,CALrB;AAAA,MAKKC,WALL,gBAKKA,WALL;;AAOH,MAAMC,UAAU,GAAG,sDAAnB;;AAPG,2BAQgD,iCAClDZ,QADkD,CARhD;AAAA,MAQKa,sBARL,sBAQKA,sBARL;AAAA,MAQ6BC,cAR7B,sBAQ6BA,cAR7B;;AAYH,MAAKL,kBAAL,EAA0B;AACzB,WACC,mCAAUG,UAAV,EACC,4BAAC,oBAAD;AACC,MAAA,QAAQ,EAAG,kBAAEG,MAAF,EAAUC,qBAAV,EAAqC;AAC/CN,QAAAA,qBAAqB,CAAE,KAAF,CAArB;AACAN,QAAAA,iBAAiB,CAAEW,MAAF,CAAjB;;AACA,YAAKC,qBAAL,EAA6B;AAC5BL,UAAAA,WAAW,CAAEX,QAAF,CAAX;AACA;AACD;AAPF,MADD,CADD;AAaA;;AAED,WAASiB,oBAAT,CAA+BC,KAA/B,EAAuC;AACtC,WAAO,YAAM;AACZ,UAAMC,kBAAkB,GACvBrB,UAAU,CAACqB,kBAAX,KAAkCD,KAAlC,GAA0CE,SAA1C,GAAsDF,KADvD;AAEAnB,MAAAA,aAAa,CAAE;AACdoB,QAAAA,kBAAkB,EAAlBA;AADc,OAAF,CAAb;AAGA,KAND;AAOA;;AAED,MAAME,eAAe,GAAG,0BAAYhB,SAAZ,0FACDP,UAAU,CAACqB,kBADV,GACmCrB,UAAU,CAACqB,kBAD9C,8CAEvB,aAFuB,EAERrB,UAAU,CAACwB,WAAX,KAA2B,UAFnB,gBAAxB;AAKA,SACC,qDACC,4BAAC,0BAAD,QACGf,4BAA4B,IAC7B,4BAAC,wBAAD;AACC,IAAA,IAAI,EACHT,UAAU,CAACqB,kBAAX,GACGI,QAAQ,kBACG,wBACVzB,UAAU,CAACqB,kBADD,CADH,UADX,GAMGI,QAAQ,CAACC,eARd;AAUC,IAAA,KAAK,EAAG,cAAI,4BAAJ,CAVT;AAWC,IAAA,WAAW,MAXZ;AAYC,IAAA,QAAQ,EAAG,CACV;AACCC,MAAAA,IAAI,EAAEF,QAAQ,CAACC,eADhB;AAECE,MAAAA,KAAK,EAAE,cAAI,oBAAJ,CAFR;AAGCC,MAAAA,QAAQ,EACP,WAAW7B,UAAU,CAACqB,kBAJxB;AAKCS,MAAAA,OAAO,EAAEX,oBAAoB,CAAE,MAAF;AAL9B,KADU,EAQV;AACCQ,MAAAA,IAAI,EAAEF,QAAQ,CAACM,iBADhB;AAECH,MAAAA,KAAK,EAAE,cAAI,sBAAJ,CAFR;AAGCC,MAAAA,QAAQ,EACP,aAAa7B,UAAU,CAACqB,kBAJ1B;AAKCS,MAAAA,OAAO,EAAEX,oBAAoB,CAAE,QAAF;AAL9B,KARU,EAeV;AACCQ,MAAAA,IAAI,EAAEF,QAAQ,CAACO,gBADhB;AAECJ,MAAAA,KAAK,EAAE,cAAI,qBAAJ,CAFR;AAGCC,MAAAA,QAAQ,EACP,YAAY7B,UAAU,CAACqB,kBAJzB;AAKCS,MAAAA,OAAO,EAAEX,oBAAoB,CAAE,OAAF;AAL9B,KAfU;AAZZ,IAFF,EAuCGT,gBAAgB,IACjB,4BAAC,wBAAD,QAAgBK,sBAAhB,CAxCF,CADD,EA4CGL,gBAAgB,IAAIM,cA5CvB,EA6CC,4BAAC,8BAAD,QACGR,0BAA0B,IAC3B,4BAAC,qBAAD;AAAW,IAAA,KAAK,EAAG,cAAI,kBAAJ;AAAnB,KACC,4BAAC,yBAAD;AACC,IAAA,OAAO,EAAGR,UAAU,CAACiC,eADtB;AAEC,IAAA,QAAQ,EAAG,kBAAEC,KAAF,EAAa;AACvBjC,MAAAA,aAAa,CAAE;AACdgC,QAAAA,eAAe,EAAEC;AADH,OAAF,CAAb;AAGA,KANF;AAOC,IAAA,KAAK,EAAG,cAAI,8BAAJ;AAPT,IADD,CAFF,CA7CD,EA4DC,8DACMpB,UADN;AAEC,IAAA,SAAS,EAAG,0BACXA,UAAU,CAACP,SADA,EAEXgB,eAFW;AAFb,MAOC,4BAAC,wBAAD;AACC,IAAA,aAAa,EAAG,CACf,sBADe,EAEf,aAFe,EAGf,mBAHe,CADjB;AAMC,IAAA,cAAc,EACXnB,gCAAgC,IACjC,CAAEL,2BADH,IAEAM,UAFA,GAGG8B,yBAAYC,eAHf,GAIG,KAXL;AAaC,IAAA,8BAA8B,EAAG,KAblC;AAcC,IAAA,WAAW,EAAGpC,UAAU,CAACwB,WAAX,IAA0B,YAdzC;AAeC,IAAA,qBAAqB,EAAC,IAfvB;AAgBC,IAAA,6BAA6B,EAAC,IAhB/B;AAiBC,IAAA,yBAAyB,EAAG;AAC3BjB,MAAAA,SAAS,EAAE;AADgB,KAjB7B;AAoBC,IAAA,6BAA6B,EAAG,IApBjC,CAqBC;AACA;AACA;AAvBD;AAwBC,IAAA,YAAY,EAAG;AAxBhB,IAPD,CA5DD,CADD;AAiGA;;eAEc,sBAAS,CACvB,sBAAY,UAAE8B,MAAF,SAA4B;AAAA;;AAAA,MAAhBnC,QAAgB,SAAhBA,QAAgB;AACvC,MAAMoC,WAAW,GAAGD,MAAM,CAAE,mBAAF,CAAN,CAA8BE,SAA9B,CAAyCrC,QAAzC,CAApB;;AADuC,gBAMnCmC,MAAM,CAAE,mBAAF,CAN6B;AAAA,MAGtCG,yBAHsC,WAGtCA,yBAHsC;AAAA,MAItCC,qBAJsC,WAItCA,qBAJsC;AAAA,MAKtCC,wBALsC,WAKtCA,wBALsC;;AAOvC,MAAMtC,gCAAgC,GAAGqC,qBAAqB,CAC7DvC,QAD6D,EAE7D,KAF6D,CAA9D;AAIA,MAAMyC,eAAe,GAAGD,wBAAwB,EAAhD;AACA,MAAM3C,2BAA2B,GAAG,CAAC,2BAAEyC,yBAAyB,CAAE,CACjEG,eADiE,CAAF,CAA3B,0DAAE,sBAElCC,MAFgC,CAArC;AAGA,SAAO;AACNxC,IAAAA,gCAAgC,EAAhCA,gCADM;AAENL,IAAAA,2BAA2B,EAA3BA,2BAFM;AAGNI,IAAAA,mBAAmB,EAAE,CAAC,CAAEmC,WAAW,CAACM;AAH9B,GAAP;AAKA,CApBD,CADuB,EAsBvB,wBAAc,UAAEC,QAAF,SAA8B;AAAA,MAAhB3C,QAAgB,SAAhBA,QAAgB;AAC3C,SAAO;AACNI,IAAAA,iBADM,6BACaW,MADb,EACsB;AAC3B,UAAK,CAAAA,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAE2B,MAAR,MAAmB,CAAxB,EAA4B;AAC3B,eAAO,KAAP;AACA;;AACDC,MAAAA,QAAQ,CAAE,mBAAF,CAAR,CAAgCC,kBAAhC,CACC5C,QADD,EAECe,MAFD;AAIA;AATK,GAAP;AAWA,CAZD,CAtBuB,CAAT,EAmCVnB,UAnCU,C","sourcesContent":["/**\n * External dependencies\n */\nimport { upperFirst } from 'lodash';\nimport classnames from 'classnames';\n\n/**\n * WordPress dependencies\n */\nimport { useState } from '@wordpress/element';\nimport {\n\tInnerBlocks,\n\tInspectorControls,\n\tBlockControls,\n\t__experimentalUseBlockWrapperProps as useBlockWrapperProps,\n} from '@wordpress/block-editor';\nimport { useDispatch, withSelect, withDispatch } from '@wordpress/data';\nimport { PanelBody, ToggleControl, ToolbarGroup } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport useBlockNavigator from './use-block-navigator';\nimport * as navIcons from './icons';\nimport NavigationPlaceholder from './placeholder';\n\nfunction Navigation( {\n\tselectedBlockHasDescendants,\n\tattributes,\n\tsetAttributes,\n\tclientId,\n\thasExistingNavItems,\n\tisImmediateParentOfSelectedBlock,\n\tisSelected,\n\tupdateInnerBlocks,\n\tclassName,\n\thasSubmenuIndicatorSetting = true,\n\thasItemJustificationControls = true,\n\thasListViewModal = true,\n} ) {\n\tconst [ isPlaceholderShown, setIsPlaceholderShown ] = useState(\n\t\t! hasExistingNavItems\n\t);\n\n\tconst { selectBlock } = useDispatch( 'core/block-editor' );\n\n\tconst blockProps = useBlockWrapperProps();\n\tconst { navigatorToolbarButton, navigatorModal } = useBlockNavigator(\n\t\tclientId\n\t);\n\n\tif ( isPlaceholderShown ) {\n\t\treturn (\n\t\t\t<div { ...blockProps }>\n\t\t\t\t<NavigationPlaceholder\n\t\t\t\t\tonCreate={ ( blocks, selectNavigationBlock ) => {\n\t\t\t\t\t\tsetIsPlaceholderShown( false );\n\t\t\t\t\t\tupdateInnerBlocks( blocks );\n\t\t\t\t\t\tif ( selectNavigationBlock ) {\n\t\t\t\t\t\t\tselectBlock( clientId );\n\t\t\t\t\t\t}\n\t\t\t\t\t} }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\tfunction handleItemsAlignment( align ) {\n\t\treturn () => {\n\t\t\tconst itemsJustification =\n\t\t\t\tattributes.itemsJustification === align ? undefined : align;\n\t\t\tsetAttributes( {\n\t\t\t\titemsJustification,\n\t\t\t} );\n\t\t};\n\t}\n\n\tconst blockClassNames = classnames( className, {\n\t\t[ `items-justified-${ attributes.itemsJustification }` ]: attributes.itemsJustification,\n\t\t'is-vertical': attributes.orientation === 'vertical',\n\t} );\n\n\treturn (\n\t\t<>\n\t\t\t<BlockControls>\n\t\t\t\t{ hasItemJustificationControls && (\n\t\t\t\t\t<ToolbarGroup\n\t\t\t\t\t\ticon={\n\t\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t\t? navIcons[\n\t\t\t\t\t\t\t\t\t\t`justify${ upperFirst(\n\t\t\t\t\t\t\t\t\t\t\tattributes.itemsJustification\n\t\t\t\t\t\t\t\t\t\t) }Icon`\n\t\t\t\t\t\t\t\t  ]\n\t\t\t\t\t\t\t\t: navIcons.justifyLeftIcon\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlabel={ __( 'Change items justification' ) }\n\t\t\t\t\t\tisCollapsed\n\t\t\t\t\t\tcontrols={ [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: navIcons.justifyLeftIcon,\n\t\t\t\t\t\t\t\ttitle: __( 'Justify items left' ),\n\t\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t\t'left' === attributes.itemsJustification,\n\t\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'left' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: navIcons.justifyCenterIcon,\n\t\t\t\t\t\t\t\ttitle: __( 'Justify items center' ),\n\t\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t\t'center' === attributes.itemsJustification,\n\t\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'center' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticon: navIcons.justifyRightIcon,\n\t\t\t\t\t\t\t\ttitle: __( 'Justify items right' ),\n\t\t\t\t\t\t\t\tisActive:\n\t\t\t\t\t\t\t\t\t'right' === attributes.itemsJustification,\n\t\t\t\t\t\t\t\tonClick: handleItemsAlignment( 'right' ),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ hasListViewModal && (\n\t\t\t\t\t<ToolbarGroup>{ navigatorToolbarButton }</ToolbarGroup>\n\t\t\t\t) }\n\t\t\t</BlockControls>\n\t\t\t{ hasListViewModal && navigatorModal }\n\t\t\t<InspectorControls>\n\t\t\t\t{ hasSubmenuIndicatorSetting && (\n\t\t\t\t\t<PanelBody title={ __( 'Display settings' ) }>\n\t\t\t\t\t\t<ToggleControl\n\t\t\t\t\t\t\tchecked={ attributes.showSubmenuIcon }\n\t\t\t\t\t\t\tonChange={ ( value ) => {\n\t\t\t\t\t\t\t\tsetAttributes( {\n\t\t\t\t\t\t\t\t\tshowSubmenuIcon: value,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tlabel={ __( 'Show submenu indicator icons' ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</PanelBody>\n\t\t\t\t) }\n\t\t\t</InspectorControls>\n\t\t\t<nav\n\t\t\t\t{ ...blockProps }\n\t\t\t\tclassName={ classnames(\n\t\t\t\t\tblockProps.className,\n\t\t\t\t\tblockClassNames\n\t\t\t\t) }\n\t\t\t>\n\t\t\t\t<InnerBlocks\n\t\t\t\t\tallowedBlocks={ [\n\t\t\t\t\t\t'core/navigation-link',\n\t\t\t\t\t\t'core/search',\n\t\t\t\t\t\t'core/social-links',\n\t\t\t\t\t] }\n\t\t\t\t\trenderAppender={\n\t\t\t\t\t\t( isImmediateParentOfSelectedBlock &&\n\t\t\t\t\t\t\t! selectedBlockHasDescendants ) ||\n\t\t\t\t\t\tisSelected\n\t\t\t\t\t\t\t? InnerBlocks.DefaultAppender\n\t\t\t\t\t\t\t: false\n\t\t\t\t\t}\n\t\t\t\t\ttemplateInsertUpdatesSelection={ false }\n\t\t\t\t\torientation={ attributes.orientation || 'horizontal' }\n\t\t\t\t\t__experimentalTagName=\"ul\"\n\t\t\t\t\t__experimentalAppenderTagName=\"li\"\n\t\t\t\t\t__experimentalPassedProps={ {\n\t\t\t\t\t\tclassName: 'wp-block-navigation__container',\n\t\t\t\t\t} }\n\t\t\t\t\t__experimentalCaptureToolbars={ true }\n\t\t\t\t\t// Template lock set to false here so that the Nav\n\t\t\t\t\t// Block on the experimental menus screen does not\n\t\t\t\t\t// inherit templateLock={ 'all' }.\n\t\t\t\t\ttemplateLock={ false }\n\t\t\t\t/>\n\t\t\t</nav>\n\t\t</>\n\t);\n}\n\nexport default compose( [\n\twithSelect( ( select, { clientId } ) => {\n\t\tconst innerBlocks = select( 'core/block-editor' ).getBlocks( clientId );\n\t\tconst {\n\t\t\tgetClientIdsOfDescendants,\n\t\t\thasSelectedInnerBlock,\n\t\t\tgetSelectedBlockClientId,\n\t\t} = select( 'core/block-editor' );\n\t\tconst isImmediateParentOfSelectedBlock = hasSelectedInnerBlock(\n\t\t\tclientId,\n\t\t\tfalse\n\t\t);\n\t\tconst selectedBlockId = getSelectedBlockClientId();\n\t\tconst selectedBlockHasDescendants = !! getClientIdsOfDescendants( [\n\t\t\tselectedBlockId,\n\t\t] )?.length;\n\t\treturn {\n\t\t\tisImmediateParentOfSelectedBlock,\n\t\t\tselectedBlockHasDescendants,\n\t\t\thasExistingNavItems: !! innerBlocks.length,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch, { clientId } ) => {\n\t\treturn {\n\t\t\tupdateInnerBlocks( blocks ) {\n\t\t\t\tif ( blocks?.length === 0 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tdispatch( 'core/block-editor' ).replaceInnerBlocks(\n\t\t\t\t\tclientId,\n\t\t\t\t\tblocks\n\t\t\t\t);\n\t\t\t},\n\t\t};\n\t} ),\n] )( Navigation );\n"]}